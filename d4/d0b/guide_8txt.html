<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>HARM: docs/sashapythonviz/guide.txt File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HARM
   </div>
   <div id="projectbrief">harm and utilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">docs/sashapythonviz/guide.txt File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="fragment"><div class="line">Sasha<span class="stringliteral">&#39;s Python viz1 Pages</span></div>
<div class="line"><span class="stringliteral">HomePage IndexRecent Activity</span></div>
<div class="line"><span class="stringliteral">View PageEdit PageDelete</span></div>
<div class="line"><span class="stringliteral">Sasha&#39;</span>s email to Jon about <span class="keyword">using</span> python <span class="keywordflow">for</span> viz</div>
<div class="line">Version 1 Created by Jonathan <a class="code" href="../../d9/d53/metric_8c.html#a52037c938e3c1b126c6277da5ca689d0">M</a>. on 07 Jul 2011.</div>
<div class="line">Hi Jon,</div>
<div class="line"></div>
<div class="line">I <span class="keywordflow">finally</span> got around to updating unfuddle with python macros. Feel free to look around… At the very end of mread/__init__.py, which is the <a class="code" href="../../d8/df4/global_8funcdeclare_8h.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main function that primarily calls init(), diag(), and step_ch_full() in loop.">main</a> macro file, you can find <a class="code" href="../../d8/d5b/defs_8general_8h.html#aa73cf2d397cae726436e08d2c891bdb0">a</a> <span class="keywordtype">short</span> tutorial. In order to run it interactively, you need to have ipython installed with modules: matplotlib, numpy; scipy (optional). One way to neatly install python with necessary mathematical modules is to install Sage. I have not tried it, however, and installed <a class="code" href="../../d8/d5b/defs_8general_8h.html#aa73cf2d397cae726436e08d2c891bdb0">a</a> 3rd party pack. (The reason it makes sense to install <a class="code" href="../../d8/d5b/defs_8general_8h.html#aa73cf2d397cae726436e08d2c891bdb0">a</a> pack, e.g., Sage, is that getting the modules to work together is <a class="code" href="../../d8/d5b/defs_8general_8h.html#aa73cf2d397cae726436e08d2c891bdb0">a</a> pain, so it is good <span class="keywordflow">if</span> someone takes care of it). If you install Python, go <span class="keywordflow">for</span> versions 2.6 or 2.7. Python version 3 and higher has stricter syntax requirements, and I will need to port my macros there one day.</div>
<div class="line"></div>
<div class="line">Python is installed on nautilus (you can <span class="keyword">get</span> access there <span class="keywordflow">if</span> you have access to Kraken — just request the access). So it might be easiest to just use it from there. Do in the command line:</div>
<div class="line"></div>
<div class="line">export MKL_NUM_THREADS=8</div>
<div class="line">export MKL_DYNAMIC=FALSE</div>
<div class="line">module load python/2.7.1</div>
<div class="line"></div>
<div class="line">Include the folder containing mread/ and streamlines/ directories into PYTHONPATH, e.g., <span class="keywordflow">if</span> you place them into ~/py folder, then add the following to your .bashrc file:</div>
<div class="line"></div>
<div class="line">export PYTHONPATH=$HOME/py:$PYTHONPATH</div>
<div class="line"></div>
<div class="line">Then you can run from the command line (instead of the usual ’jsm’):</div>
<div class="line"></div>
<div class="line">ipython</div>
<div class="line"></div>
<div class="line">and from there do:</div>
<div class="line"></div>
<div class="line">%run ~/py/mread/__init__.py</div>
<div class="line"></div>
<div class="line">This will run the function ’main’ of that file (which is defined to be after ’if name == __main__ directive). In that <a class="code" href="../../d8/df4/global_8funcdeclare_8h.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main function that primarily calls init(), diag(), and step_ch_full() in loop.">main</a> function only one part of the code is enabled, which is the tutorial located at the very end of that file:</div>
<div class="line"></div>
<div class="line">if True:</div>
<div class="line">#Short tutorial. Some of the names will sound familiar :)</div>
<div class="line">print( “Running <a class="code" href="../../d8/d5b/defs_8general_8h.html#aa73cf2d397cae726436e08d2c891bdb0">a</a> short tutorial: read in grid, 0th dump, plot and compute some things.” )</div>
<div class="line">#1 read in gdump (specifying “use2d=True” reads in just one r-theta slice to save memory)</div>
<div class="line">grid3d(“gdump.bin”, use2d = True)</div>
<div class="line">#2 read in dump0000</div>
<div class="line">rd(“dump0000.bin”)</div>
<div class="line"># or, instead of dump, you could read in fieldline0000.bin</div>
<div class="line">rfd(“fieldline0000.bin”)</div>
<div class="line">#3 compute extra things</div>
<div class="line">cvel()</div>
<div class="line">Tcalcud()</div>
<div class="line">faraday()</div>
<div class="line">#4 compute vector potential</div>
<div class="line">aphi = fieldcalc()</div>
<div class="line">#5 plot density and overplotted vector potential</div>
<div class="line">plt.figure(1) #open figure 1</div>
<div class="line">plco(lrho,cb=True,nc=25) #plco — erases and plots; cb=True tells it to draw color bar, nc = number of contours</div>
<div class="line">plc(aphi,colors=’k’) <span class="preprocessor">#plc — overplots without erasing; colors=’k’ says plot in blac’k’</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#6 compute u^\phi</span></div>
<div class="line"><span class="preprocessor"></span>uuphi = uu3 * <a class="code" href="../../dc/dd2/newcodediff_8txt.html#a9a663b46497bd8f1608c548396d23320">dxdxp</a>[3,3]</div>
<div class="line"><span class="preprocessor">#7 compute u_\phi</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># first, lower the index</span></div>
<div class="line"><span class="preprocessor"></span>ud_computed = mdot(gv3,uu) <span class="preprocessor">#&lt;— this is already computed as ’ud’ inside of cvel() call</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># then, take 3rd component and convert to phi from x3</span></div>
<div class="line"><span class="preprocessor"></span>udphi = (ud_computed/dxdxp[3,3])3</div>
<div class="line">#8 phi-average density</div>
<div class="line">rhophiavg = rho.mean(axis=-1) #-1 says to average over the last dimension</div>
<div class="line"><span class="preprocessor">#9 clean up some memory</span></div>
<div class="line"><span class="preprocessor"></span>ud_computed = None</div>
<div class="line">uuphi = None</div>
<div class="line">udphi = None</div>
<div class="line">aphi = None</div>
<div class="line">gc.collect()</div>
<div class="line"></div>
<div class="line">Python syntax is quite simple and intuitive. It uses indentation instead of curly braces. It also uses range specification <span class="keywordflow">for</span> arrays similar to that in Matlab, so should feel like home to you. Let <a class="code" href="../../d8/d5b/defs_8general_8h.html#a9b9ce287df1d997b449c37e3ae5221b2">me</a> know <span class="keywordflow">if</span> you find something confusing or unclear. Also, of course, in any of the macros there could be bugs, so please <span class="keywordflow">do</span> let <a class="code" href="../../d8/d5b/defs_8general_8h.html#a9b9ce287df1d997b449c37e3ae5221b2">me</a> know <span class="keywordflow">if</span> you think something is not right. If you changed the format of data files, that could be accommodated on the fly, especially <span class="keywordflow">if</span> there is <a class="code" href="../../d8/d5b/defs_8general_8h.html#aa73cf2d397cae726436e08d2c891bdb0">a</a> one-to-one correspondence between the number of columns and the data format. Then, when reading in the file, we can count the columns and deduce the format version. Or, other things could be done.</div>
<div class="line"></div>
<div class="line">Cheers!</div>
<div class="line">Sasha</div>
</div><!-- fragment --> 
<p>Definition in file <a class="el" href="../../d4/d0b/guide_8txt_source.html">guide.txt</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 20 2016 15:52:36 for HARM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
