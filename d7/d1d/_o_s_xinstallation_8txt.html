<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>HARM: docs/OSXinstallation.txt File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HARM
   </div>
   <div id="projectbrief">harm and utilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">docs/OSXinstallation.txt File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="fragment"><div class="line">Compiling and running HARM on MAc OS <a class="code" href="../../dc/dd2/newcodediff_8txt.html#a933233ff9879962bcc2ff987c6920f90">X</a> (<span class="keyword">using</span> latest git version)</div>
<div class="line">Version 1 created by Peter Polko 18 Feb 2015</div>
<div class="line"></div>
<div class="line">1) Installing HDF4 (necessary only once per computer)</div>
<div class="line">1<a class="code" href="../../d8/d5b/defs_8general_8h.html#aa73cf2d397cae726436e08d2c891bdb0">a</a>) If you don<span class="stringliteral">&#39;t have gcc and gfortran installed with the same version:</span></div>
<div class="line"><span class="stringliteral">1a1) Download MacPorts (https://www.macports.org/install.php) and open a terminal</span></div>
<div class="line"><span class="stringliteral">1a2) Run the selfupdate: sudo port -v selfupdate</span></div>
<div class="line"><span class="stringliteral">1a3) Type &quot;port list &#39;</span>gcc*<span class="stringliteral">&#39;&quot; for a list of gcc versions</span></div>
<div class="line"><span class="stringliteral">1a4) Type &quot;sudo port install gcc48&quot; to install for example version 4.8.4</span></div>
<div class="line"><span class="stringliteral">1a5) Type &quot;sudo port upgrade --enforce-variants gcc48 +gfortran&quot; to install gfortran</span></div>
<div class="line"><span class="stringliteral">1a6) Type &quot;sudo port select --set gcc mp-gcc48&quot; to activate for example version 4.8.4 (mp for MacPorts)</span></div>
<div class="line"><span class="stringliteral">1a7) Make sure &quot;/opt/local/bin&quot; is first in your PATH shell variable</span></div>
<div class="line"><span class="stringliteral">1a8) Type &quot;which gcc&quot; or &quot;gcc -v&quot;, and &quot;which gfortran&quot; or &quot;gfortran -v&quot; to check the right version is used</span></div>
<div class="line"><span class="stringliteral">1b) If ZLIB isn&#39;</span><a class="code" href="../../d8/d5b/defs_8general_8h.html#ae1ee1e1c83c3f70e2e1afed4f4f5b41e">t</a> installed:</div>
<div class="line">1b1) Type <span class="stringliteral">&quot;sudo port install zlib&quot;</span></div>
<div class="line">1c) If SZIP isn<span class="stringliteral">&#39;t installed:</span></div>
<div class="line"><span class="stringliteral">1c1) Type &quot;sudo port install szip&quot;</span></div>
<div class="line"><span class="stringliteral">1d) If JPEGlib isn&#39;</span><a class="code" href="../../d8/d5b/defs_8general_8h.html#ae1ee1e1c83c3f70e2e1afed4f4f5b41e">t</a> installed:</div>
<div class="line">1d1) Download jpegsrc.v9a.tar.gz from http:<span class="comment">//www.ijg.org/files/</span></div>
<div class="line">1<a class="code" href="../../d9/de9/coord_8c.html#aab5d055c59dc5dbfcaef566bb6061530">d2</a>) Type <span class="stringliteral">&quot;tar xvzf jpegsrc.v9a.tar.gz&quot;</span>, <span class="stringliteral">&quot;cd jpeg-9a&quot;</span>, <span class="stringliteral">&quot;./configure&quot;</span>, <span class="stringliteral">&quot;make&quot;</span>, <span class="stringliteral">&quot;make test&quot;</span>, and <span class="keywordflow">if</span> that doesn<span class="stringliteral">&#39;t give any errors &quot;sudo make install&quot;</span></div>
<div class="line"><span class="stringliteral">1e) Installing HDF4:</span></div>
<div class="line"><span class="stringliteral">1e1) Download HDF4 from http://www.hdfgroup.org/release4/obtain.html</span></div>
<div class="line"><span class="stringliteral">1e2) Make sure there are no shell variables set such as GCC, CC, CXX, etc. that can interfere with compilation</span></div>
<div class="line"><span class="stringliteral">1e3) Type &quot;tar xvzf hdf-4.2.11.tar.bz2&quot;, &quot;cd hdf-4.2.11&quot;, &quot;./configure --prefix=/usr/local&quot;, &quot;make&quot;, &quot;make check&quot;, &quot;sudo make install&quot;, &quot;make installcheck&quot;</span></div>
<div class="line"><span class="stringliteral">1e4) Check if this includes libhdf4g-dev libhdf4g-doc libhdf4-0 libhdf4-dev libhdf4-doc hdf4-tools</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">2) Installing vis5d+ is not absolutely necessary (but see new notebook for vis5dPlus installation instructions if required).</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">3) Preparing to obtain the code (necessary only once per user/computer)</span></div>
<div class="line"><span class="stringliteral">3a) Create an ssh public/private key pair for use with unfuddle:</span></div>
<div class="line"><span class="stringliteral">3a1) Type &quot;ssh-keygen&quot; [hit enter if any questions]</span></div>
<div class="line"><span class="stringliteral">3a2) Copy the contents of the public key (e.g. ~/.ssh/id_rsa.pub) to unfuddle in your personal settings.</span></div>
<div class="line"><span class="stringliteral">3b) Create a directory for git code tree by typing &quot;mkdir harm ; cd harm&quot;</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">4) Getting the HARM code</span></div>
<div class="line"><span class="stringliteral">4a) Type &quot;git clone git@harm.unfuddle.com:harm/harmgit.git&quot;</span></div>
<div class="line"><span class="stringliteral">4b) Standard permissions on many computers is that anyone can read your files. Wherever you place the code or move it to (e.g. some supercomputer or other server), PLEASE change the permissions of that directory so no one else can access (i.e. copy) the code.  I don&#39;</span><a class="code" href="../../d8/d5b/defs_8general_8h.html#ae1ee1e1c83c3f70e2e1afed4f4f5b41e">t</a> want just anybody being able to copy HARM.  Please <span class="keywordflow">do</span> <span class="keyword">this</span> <span class="keywordflow">for each</span> and every machine you place the code onto.</div>
<div class="line">4b1) Type <span class="stringliteral">&quot;chmod -R og-rwx harmgit&quot;</span> Again, <span class="keywordflow">do</span> <span class="keyword">this</span> no matter where you copy the code to.</div>
<div class="line">4c) Type <span class="stringliteral">&quot;cd harmgit&quot;</span></div>
<div class="line"></div>
<div class="line">5) Setting <a class="code" href="../../dc/dd2/newcodediff_8txt.html#a1df03026db3aa663afda0c9eed67408e">up</a> the environment (necessary only once per computer)</div>
<div class="line">5<a class="code" href="../../d8/d5b/defs_8general_8h.html#aa73cf2d397cae726436e08d2c891bdb0">a</a>) The Intel compiler icc (<span class="keywordflow">do</span> <span class="keyword">this</span> <span class="keywordflow">if</span> icc is not already installed and you<span class="stringliteral">&#39;re not calling the source command given below in .bashrc or .profile):</span></div>
<div class="line"><span class="stringliteral">5a1) When you don&#39;</span><a class="code" href="../../d8/d5b/defs_8general_8h.html#ae1ee1e1c83c3f70e2e1afed4f4f5b41e">t</a> want to use icc, <span class="keyword">set</span> USEICCINTEL=0 and USEGCC=1 in makehead.inc</div>
<div class="line">5a2) To install icc, download it from http:<span class="comment">//software.intel.com/en-us/non-commercial-software-development and choose the one with both Intel and Fortran compilers (e.g., Intel® Parallel Studio XE 2013 for Linux)</span></div>
<div class="line">5a3) To use icc, <a class="code" href="../../d3/ddc/phys_8funcdeclare_8h.html#a4ebf7765a6bde079a76719b89d3033b6" title="add in source terms to equations of motion ui and dUriemann in UEVOLVE form assume q(pr) so consisten...">source</a> any libraries, e.g., <span class="stringliteral">&quot;source /opt/intel/mkl/10.0.3.020/tools/environment/mklvarsem64t.sh&quot;</span></div>
<div class="line">5b) The Message Passing Interface (MPI) for parallel computing:</div>
<div class="line">5b1) When you don&#39;<a class="code" href="../../d8/d5b/defs_8general_8h.html#ae1ee1e1c83c3f70e2e1afed4f4f5b41e">t</a> want to use MPI, set USEMPI=0 (for first setting which is a choice) in makehead.inc</div>
<div class="line">5b2) To install MPI, go to: http:<span class="comment">//www.mpich.org/downloads/ and get the &quot;mpich-3.0.2 (stable release)&quot; version to install from source.  Look at the README, follow &quot;bash&quot; versions of &quot;configure&quot; &quot;make&quot; &quot;make install&quot; with your username instead of &lt;USERNAME&gt;</span></div>
<div class="line">5c) The Multi Processing package OpenMP for multiprocessing:</div>
<div class="line">5c1) When you don&#39;<a class="code" href="../../d8/d5b/defs_8general_8h.html#ae1ee1e1c83c3f70e2e1afed4f4f5b41e">t</a> want to use OpenMP (or if you have problems compiling on OS <a class="code" href="../../dc/dd2/newcodediff_8txt.html#a933233ff9879962bcc2ff987c6920f90">X</a>), set <a class="code" href="../../d3/d67/global_8general_8h.html#a126b8328170a52811a990e5dd302f783">USEOPENMP</a>=0 in makehead.inc.</div>
<div class="line">5d) The Linear Algebra PACKage LAPACK:</div>
<div class="line">5d1) When you don&#39;<a class="code" href="../../d8/d5b/defs_8general_8h.html#ae1ee1e1c83c3f70e2e1afed4f4f5b41e">t</a> want to use LAPACK, set USELAPACK=0 and USELAPACKNEW=0 in makehead.inc.</div>
<div class="line">5e) The Vis5D plotting program:</div>
<div class="line"><span class="preprocessor">## Start of new part ##</span></div>
<div class="line"><span class="preprocessor"></span>5e1) When you don<span class="stringliteral">&#39;t want to use Vis5D, set USEV5D=0 in makehead.inc.</span></div>
<div class="line"><span class="stringliteral">## End of new part ##</span></div>
<div class="line"><span class="stringliteral">## Start of obsoleted part ##</span></div>
<div class="line"><span class="stringliteral">5e1) When you don&#39;</span><a class="code" href="../../d8/d5b/defs_8general_8h.html#ae1ee1e1c83c3f70e2e1afed4f4f5b41e">t</a> want to use Vis5D, change <span class="stringliteral">&#39;#define V5D (1)&#39;</span> to <span class="stringliteral">&#39;#define V5D (0)&#39;</span> in bin2txt.c.</div>
<div class="line">5f) The Hierarchical Data Format header files:</div>
<div class="line">5f1) In bin2txt.c, make sure <span class="stringliteral">&#39;#include &quot;hdf.h&quot;&#39;</span> and <span class="stringliteral">&#39;#include &quot;mfhdf.h&quot;&#39;</span> are used, instead of <span class="stringliteral">&#39;hdf/hdf.h&#39;</span> and <span class="stringliteral">&#39;hdf/mfhdf.h&#39;</span>.</div>
<div class="line">## End of obsoleted part ##</div>
<div class="line">5g) Choosing between <span class="stringliteral">&quot;system&quot;</span> (every library installed on system level) or <span class="stringliteral">&quot;user&quot;</span> (everything installed in a <a class="code" href="../../d9/d54/other6_8txt.html#ad3c086d13a326385668d92acdb4625a6">user</a><span class="stringliteral">&#39;s home folder) type installation:</span></div>
<div class="line"><span class="stringliteral">5g1) In makefile, search for &quot;bin2txt&quot; and either choose block of code for &quot;system&quot; type installation or &quot;user&quot; type installation and adapt the commands to your own setup.</span></div>
<div class="line"><span class="stringliteral">5h) Link sh to bash (CAREFUL! do this if you have root access):</span></div>
<div class="line"><span class="stringliteral">5h1) Type &quot;sudo bash&quot;</span></div>
<div class="line"><span class="stringliteral">5h2) Type &quot;cd /bin&quot;</span></div>
<div class="line"><span class="stringliteral">5h3) Type &quot;mv sh sh_old&quot; to backup the old version</span></div>
<div class="line"><span class="stringliteral">5h4) Type &quot;ln -s bash sh&quot;</span></div>
<div class="line"><span class="stringliteral">5h5) Type &quot;exit&quot; to get back to your user</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">## Start of obsoleted part ##</span></div>
<div class="line"><span class="stringliteral">5i) Edit makefile and do 2 things:</span></div>
<div class="line"><span class="stringliteral">5i1) search -lv5d .  Before that, add &quot;-L /home/&lt;username&gt;/lib&quot;  without quotes and with &lt;username&gt; replaced by your user name.</span></div>
<div class="line"><span class="stringliteral">5i2) Also, add &quot;-I /home/&lt;username&gt;/include&quot;  (-I is a capital i and not a capital l) to the end of that same line.</span></div>
<div class="line"><span class="stringliteral">## End of obsoleted part ##</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">6) Setting up the links to the desired simulation model initializations and boundary condition files</span></div>
<div class="line"><span class="stringliteral">6a) Type &quot;ln -s initboundcode/init.fishmon.c init.c&quot;</span></div>
<div class="line"><span class="stringliteral">6b) Type &quot;ln -s initboundcode/init.fishmon.h init.h&quot;</span></div>
<div class="line"><span class="stringliteral">6c) Type &quot;ln -s initboundcode/bounds.fishmon.c bounds.c&quot;</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">7) Compiling the codes</span></div>
<div class="line"><span class="stringliteral">7b) Type &quot;make superclean ; make prepsmcalc ; make smcalc ; cp smcalc ~/bin/&quot;</span></div>
<div class="line"><span class="stringliteral">7b1) If you get an error \\n\\tgcc, switch to bash and try again. The tcsh echo command does not support interpretation of tabs and newlines.</span></div>
<div class="line"><span class="stringliteral">7c) Type &quot;make superclean ; make prepiinterp ; make iinterp ; cp iinterp ~/bin/&quot;</span></div>
<div class="line"><span class="stringliteral">7d) Type &quot;make superclean ; make prepbin2txt ; make bin2txt ; cp bin2txt ~/bin/&quot;</span></div>
<div class="line"><span class="stringliteral">7e) Type &quot;make superclean ; make prep ; make&quot; (If you have N cores, you can vastly speed-up compile by typing &quot;make superclean ; make prep ; make -j N&quot;)</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">8) Making directory for run code</span></div>
<div class="line"><span class="stringliteral">8a) Type &quot;mkdir run ; cp grmhd run ; cd run&quot;</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">9) Running the code</span></div>
<div class="line"><span class="stringliteral">9a) When using MPI and OpenMP, to run code with 4 OpenMP threads per node in 1x1x1 MPI matrix, type &quot;nohup ./grmhd 4 1 1 1 &amp;&quot;</span></div>
<div class="line"><span class="stringliteral">9b) When not using MPI and OpenMP, type &quot;nohup ./grmhd &amp;&quot;</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">10) Visualizing the results</span></div>
<div class="line"><span class="stringliteral">10a) You can look at results with SM (Supermongo) using the SM project.</span></div>
<div class="line"><span class="stringliteral">10b) You can also use vis5d+.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">11) Finally, this is not a shared code.  Only you are allowed access to this code.  Do not share it or share your access to this site.  Thank you for your understanding!</span></div>
<div class="line"><span class="stringliteral">-Jonathan McKinney</span></div>
</div><!-- fragment --> 
<p>Definition in file <a class="el" href="../../d7/d1d/_o_s_xinstallation_8txt_source.html">OSXinstallation.txt</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 20 2016 15:52:36 for HARM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
