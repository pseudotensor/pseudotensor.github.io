<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>HARM: docs/compilekernel.txt File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HARM
   </div>
   <div id="projectbrief">harm and utilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">docs/compilekernel.txt File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="fragment"><div class="line">How to: Compile Linux kernel 2.6</div>
<div class="line"></div>
<div class="line">by nixcraft</div>
<div class="line"></div>
<div class="line">Compiling custom kernel has its own advantages and disadvantages. However, <span class="keyword">new</span> Linux <a class="code" href="../../d9/d54/other6_8txt.html#ad3c086d13a326385668d92acdb4625a6">user</a> / admin find it difficult to compile Linux kernel. Compiling kernel needs to understand few things and then just type couple of commands. This step by step howto covers compiling Linux kernel version 2.6.xx under Debian GNU Linux. However, instructions remains the same <span class="keywordflow">for</span> any other distribution except <span class="keywordflow">for</span> apt-<span class="keyword">get</span> command.</div>
<div class="line">Step # 1 Get Latest Linux kernel code</div>
<div class="line"></div>
<div class="line">Visit http:<span class="comment">//kernel.org/ and download the latest source code. File name would be linux-x.y.z.tar.bz2, where x.y.z is actual version number. For example file inux-2.6.25.tar.bz2 represents 2.6.25 kernel version. Use wget command to download kernel source code:</span></div>
<div class="line">$ <a class="code" href="../../d9/d54/other6_8txt.html#abea40877aa2ce569e5f9e3a264872b54">cd</a> /tmp</div>
<div class="line">$ wget http:<span class="comment">//www.kernel.org/pub/linux/kernel/v2.6/linux-x.y.z.tar.bz2</span></div>
<div class="line"></div>
<div class="line">Note: Replace x.y.z with actual version number.</div>
<div class="line">Step # 2 Extract tar (.tar.bz3) file</div>
<div class="line"></div>
<div class="line">Type the following command:</div>
<div class="line"><span class="preprocessor"># tar -xjvf linux-2.6.25.tar.bz2 -C /usr/src</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># cd /usr/src</span></div>
<div class="line"><span class="preprocessor"></span>Step # 3 Configure kernel</div>
<div class="line"></div>
<div class="line">Before you configure kernel make sure you have development tools (gcc compilers and related tools) are installed on your system. If gcc compiler and tools are not installed then use apt-<span class="keyword">get</span> command under Debian Linux to install development tools.</div>
<div class="line"># apt-<span class="keyword">get</span> install gcc</div>
<div class="line"></div>
<div class="line">Now you can start kernel configuration by typing any one of the command:</div>
<div class="line"></div>
<div class="line">      $ make menuconfig - Text based color menus, radiolists &amp; dialogs. This option also useful on remote server <span class="keywordflow">if</span> you wanna compile kernel remotely.</div>
<div class="line">      $ make xconfig - <a class="code" href="../../dc/dd2/newcodediff_8txt.html#a933233ff9879962bcc2ff987c6920f90">X</a> windows (Qt) based configuration tool, works best under KDE desktop</div>
<div class="line">      $ make gconfig - <a class="code" href="../../dc/dd2/newcodediff_8txt.html#a933233ff9879962bcc2ff987c6920f90">X</a> windows (Gtk) based configuration tool, works best under Gnome Dekstop.</div>
<div class="line"></div>
<div class="line">For example make menuconfig command launches following screen:</div>
<div class="line">$ make menuconfig</div>
<div class="line"></div>
<div class="line">You have to select different options as per your need. Each configuration option has HELP button associated with it so select help button to get help.</div>
<div class="line">Step <span class="preprocessor"># 4 Compile kernel</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">Start compiling to create <a class="code" href="../../d8/d5b/defs_8general_8h.html#aa73cf2d397cae726436e08d2c891bdb0">a</a> compressed kernel image, enter:</div>
<div class="line">$ make</div>
<div class="line">Start compiling to kernel modules:</div>
<div class="line">$ make modules</div>
<div class="line"></div>
<div class="line">Install kernel modules (become <a class="code" href="../../d8/d5b/defs_8general_8h.html#aa73cf2d397cae726436e08d2c891bdb0">a</a> root <a class="code" href="../../d9/d54/other6_8txt.html#ad3c086d13a326385668d92acdb4625a6">user</a>, use su command):</div>
<div class="line">$ su -</div>
<div class="line"># make modules_install</div>
<div class="line">Step # 5 Install kernel</div>
<div class="line"></div>
<div class="line">So far we have compiled kernel and installed kernel modules. It is time to install kernel itself.</div>
<div class="line"># make install</div>
<div class="line"></div>
<div class="line">It will install three files into /boot directory as well as modification to your kernel grub configuration file:</div>
<div class="line"></div>
<div class="line">      System.map-2.6.25</div>
<div class="line">      config-2.6.25</div>
<div class="line">      vmlinuz-2.6.25</div>
<div class="line"></div>
<div class="line">Step # 6: Create an initrd image</div>
<div class="line"></div>
<div class="line">Type the following command at <a class="code" href="../../d8/d5b/defs_8general_8h.html#aa73cf2d397cae726436e08d2c891bdb0">a</a> shell prompt:</div>
<div class="line"># <a class="code" href="../../d9/d54/other6_8txt.html#abea40877aa2ce569e5f9e3a264872b54">cd</a> /boot</div>
<div class="line"># mkinitrd -o initrd.img-2.6.25 2.6.25</div>
<div class="line"></div>
<div class="line">initrd images contains device driver which needed to load rest of the operating system later on. Not all computer requires initrd, but it is safe to create one.</div>
<div class="line">Step # 7 Modify Grub configuration file - /boot/grub/menu.lst</div>
<div class="line"></div>
<div class="line">Open file using vi:</div>
<div class="line"># vi /boot/grub/menu.lst</div>
<div class="line"></div>
<div class="line">title           Debian GNU/Linux, kernel 2.6.25 Default</div>
<div class="line">root            (hd0,0)</div>
<div class="line">kernel          /boot/vmlinuz root=/dev/hdb1 ro</div>
<div class="line">initrd          /boot/initrd.img-2.6.25</div>
<div class="line">savedefault</div>
<div class="line">boot</div>
<div class="line"></div>
<div class="line">Remember to setup correct root=/dev/hdXX device. Save and close the file. If you think editing and writing all lines by hand is too much for you, try out update-grub command to update the lines for each kernel in /boot/grub/menu.lst file. Just type the command:</div>
<div class="line"># update-grub</div>
<div class="line">Neat. Huh?</div>
<div class="line">Step # 8 : Reboot computer and boot into your new kernel</div>
<div class="line"></div>
<div class="line">Just issue reboot command:</div>
<div class="line"># reboot</div>
<div class="line">For more information see:</div>
<div class="line"></div>
<div class="line">      Our Exploring Linux kernel article and Compiling Linux Kernel module only.</div>
<div class="line">      Official README file has more information on kernel and software requirement to compile it. This file is kernel <a class="code" href="../../d3/ddc/phys_8funcdeclare_8h.html#a4ebf7765a6bde079a76719b89d3033b6" title="add in source terms to equations of motion ui and dUriemann in UEVOLVE form assume q(pr) so consisten...">source</a> directory tree.</div>
<div class="line">      Documentation/ directory has interesting kernel documentation for you in kernel <a class="code" href="../../d3/ddc/phys_8funcdeclare_8h.html#a4ebf7765a6bde079a76719b89d3033b6" title="add in source terms to equations of motion ui and dUriemann in UEVOLVE form assume q(pr) so consisten...">source</a> tree.</div>
</div><!-- fragment --> 
<p>Definition in file <a class="el" href="../../df/d80/compilekernel_8txt_source.html">compilekernel.txt</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 20 2016 15:52:36 for HARM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
