<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>HARM: docs/pnmhd/12.txt File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HARM
   </div>
   <div id="projectbrief">harm and utilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">docs/pnmhd/12.txt File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="fragment"><div class="line">dr8, ppm2fli, xanim, vis5d+, and mpeg2encode</div>
<div class="line">Version 1 Created by Jonathan <a class="code" href="../../d9/d53/metric_8c.html#a52037c938e3c1b126c6277da5ca689d0">M</a>. on 30 May 2009.</div>
<div class="line">Avery and Manuel,</div>
<div class="line"></div>
<div class="line">—————</div>
<div class="line"></div>
<div class="line">2D:</div>
<div class="line"></div>
<div class="line">—————</div>
<div class="line"></div>
<div class="line">First, one can view rather small 3D cubes as single large 2D panels, and even animate this. This can be quite useful <span class="keywordflow">for</span> our first testing purposes. The base program is r8torasjon and a script that uses it is dr8, both in /usr/local/bin/ and called from anywhere. We may want to modify <span class="keyword">this</span> program so one can also see more square panels. For example 32^3 = (32*8)X = 256x128 .</div>
<div class="line"></div>
<div class="line">For now, consider the MHD3D BOMB example, which is a 32^3 model, which can be made 2D with 32X = 32x1024. This forces a <span class="keywordflow">break</span> every 32, so it works to view the correct slices. To view the image one does to view the density</div>
<div class="line"></div>
<div class="line">start in the bin directory</div>
<div class="line"><a class="code" href="../../d9/d54/other6_8txt.html#abea40877aa2ce569e5f9e3a264872b54">cd</a> i/imx0-0-0-s1</div>
<div class="line"></div>
<div class="line">dr8 imx0-0-0-s1-0000.dat.r8.gz 32 1024</div>
<div class="line"></div>
<div class="line">which shows the single density spike. Later times can be viewed like:</div>
<div class="line"></div>
<div class="line">dr8 imx0-0-0-s1-0010.dat.r8.gz 32 1024</div>
<div class="line"></div>
<div class="line">A movie of the sequence can be made by <span class="keyword">using</span> my modified ppm2fli program by doing:</div>
<div class="line"></div>
<div class="line">ls .r8 &gt; list.txt</div>
<div class="line"></div>
<div class="line">ppm2fli <a class="code" href="../../d9/d54/other6_8txt.html#a4c46d2d3bb1db943c0dce6af1c779ff5">p</a>/usr/local/bin/john.pal N g 32x1024 z 32x1024 -s 0 list.txt movie.fli</div>
<div class="line"></div>
<div class="line">The files can be gzipped or not, doesn’t matter.</div>
<div class="line"></div>
<div class="line">To view <span class="keyword">this</span>, one should use a LOCAL copy of “xanim” (NOT ON RELATIVITY) and <span class="keywordflow">do</span>:</div>
<div class="line"></div>
<div class="line">xanim -WrT2 movie.fli</div>
<div class="line"></div>
<div class="line">For the BOMB test, I made the <span class="keyword">final</span> time way too <span class="keywordtype">long</span>. Only the first 30 frames or so are recognizable. The outflow boundary conditions and the asymmetric position of the bomb lead to reflections ad nauseum.</div>
<div class="line"></div>
<div class="line">————</div>
<div class="line"></div>
<div class="line">3D:</div>
<div class="line"></div>
<div class="line">————</div>
<div class="line"></div>
<div class="line">Avery and I were talking about visualizing things in <a class="code" href="../../dc/dc2/f2c_8h.html#a031f8951175b43076c2084a6c2173410">real</a> 3D (rather than just 1D or 2D slices in SM, which can be ok). I did <span class="keyword">this</span> with a program called vis5d+ <span class="keywordflow">while</span> Avery did <span class="keyword">this</span> with a <span class="keyword">package </span>called VTK. I mentioned to Avery that I didn’t have vis5d+ installed, but I actually do have it installed on relativity. At the time when I was working on vis5d+, I also made a program to make v5d files, which are the files that vis5d+ uses. The format allows for movies and all sorts of things.</div>
<div class="line"></div>
<div class="line">On relativity this program is a very general program I made called “bin2txt”. It converts back and forth between various binary and text formats. Just type “bin2txt” and it gives you some info on what can be done and how to do it. The default version is a “double” version. The bin2txtf is a float version. Since the MHD3D bomb was run in floats, one should use the float version of bin2txt.</div>
<div class="line"></div>
<div class="line">——-</div>
<div class="line"></div>
<div class="line">Consider the MHD3D BOMB example. To make a 3D v5d file that can later be viewed within vis5d+ or processed by vis5d+ to make a volumetric movie or whatever, one does the following:</div>
<div class="line"></div>
<div class="line">First, let’s create a single image file for viewing:</div>
<div class="line"></div>
<div class="line">1) Create a vis5d.head file that contains the following:</div>
<div class="line"></div>
<div class="line">density 1E-4 1</div>
<div class="line"></div>
<div class="line">0 1 0 1 0 1</div>
<div class="line"></div>
<div class="line">2) Run the bin2txtf program:</div>
<div class="line"></div>
<div class="line">bin2txtf 0 5 0 0 3 32 32 32 1 imx0-0-0-s1-0010.dat.r8.gz density0010.v5d b 1</div>
<div class="line"></div>
<div class="line">vis5d density0010.v5d</div>
<div class="line"></div>
<div class="line">then, say, click on one of the renderings of density in the bottom box, such as “Slice Vert” by clicking on the box saying “density” below that label. Rotate the graphic on the right with the mouse. Default mouse action is “normal” in the middle of the control panel. Choose “slice” and use the right mouse button to grab the nobs on the slice to move the slice up and down.</div>
<div class="line">Use the “sounding” to get cords through the box. Use the “probe” to get values in the box. Use the “clipping” to slice through renderings of the box.</div>
<div class="line"></div>
<div class="line">3) To make a movie, one needs to first make a v5d file that contains all the images one wants. For example:</div>
<div class="line"></div>
<div class="line">ls imx0-0-0-s1-00[0-2][0-9]* &gt; inputfilenames.head</div>
<div class="line"></div>
<div class="line">With vis5d one doesn’t need an outputfilenames.head file since it puts them all in one file.</div>
<div class="line">bin2txtf 0 5 0 0 3 32 32 32 30 blah densitymovie.v5d b 1</div>
<div class="line"></div>
<div class="line">then load vis5d:</div>
<div class="line">vis5d densitymovie.v5d</div>
<div class="line"></div>
<div class="line">then adjust your viewing angle and such things and click “animate” to see the animation, or just run the script as below.</div>
<div class="line">then run a script (e.g. /usr/local/bin/movie.tcl) by clicking on script in top control panel box, choosing that script, and clicking ok. Let the program generate the files, and hopefully it doesn’t crash.</div>
<div class="line">that particular script makes an ugly movie for this model, but it’s a start.</div>
<div class="line">Now you have some images called “frame????.ppm.gz” . Let’s make it into a fli movie:</div>
<div class="line">ls frame????.ppm.gz &gt; list.txt</div>
<div class="line"></div>
<div class="line">ppm2fli N g 1121x1121 -s 0 list.txt moviev5d.fli</div>
<div class="line"></div>
<div class="line">I think the vis5d command line options control the size of the movie.</div>
<div class="line">————-</div>
<div class="line"></div>
<div class="line">Making MPG files instead:</div>
<div class="line"></div>
<div class="line">————</div>
<div class="line"></div>
<div class="line">Anywhere one can make fli’s one can make mpg’s instead. For example, for the 2D movie described above, one can grab the /usr/local/bin/MPEG-1.par file:</div>
<div class="line"></div>
<div class="line">cp /usr/local/bin/MPEG-1.par .</div>
<div class="line"></div>
<div class="line">mpeg2encode MPEG-1.par movie.mpg</div>
<div class="line"></div>
<div class="line">and to view:</div>
<div class="line">xine movie.mpg</div>
<div class="line"></div>
<div class="line">and that’s about all I know how to do!</div>
<div class="line">—————————</div>
<div class="line"></div>
<div class="line">-Jon</div>
</div><!-- fragment --> 
<p>Definition in file <a class="el" href="../../d3/dc3/12_8txt_source.html">12.txt</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 20 2016 15:52:36 for HARM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
