<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>HARM: docs/pnmhd/2.txt File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HARM
   </div>
   <div id="projectbrief">harm and utilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">docs/pnmhd/2.txt File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="fragment"><div class="line">Dealing with 2D simulation (e.g.) for r-\phi or <a class="code" href="../../d8/d5b/defs_8general_8h.html#abf002e87ba3ed4d3c9dcc98216e6d9d6">R</a>-\phi</div>
<div class="line">Version 1 Created by Jonathan <a class="code" href="../../d9/d53/metric_8c.html#a52037c938e3c1b126c6277da5ca689d0">M</a>. on 31 May 2009.</div>
<div class="line">Zhaohuan,</div>
<div class="line"></div>
<div class="line">Yes, one should be able to just set <a class="code" href="../../da/d3e/definit_8h.html#acd864640121c7df2c19f61f7baa507e4">N2</a> to 1. I do recall doing r-\phi simulations, but I’m not sure about <a class="code" href="../../d8/d5b/defs_8general_8h.html#abf002e87ba3ed4d3c9dcc98216e6d9d6">R</a>-\phi simulations. That is, I am not sure how well-tested the cylindrical coordinates version is. It’s just a matter of geometry terms that are fairly well-encapsulated so if there is a problem it should be relatively easy to fix.</div>
<div class="line"></div>
<div class="line">If you use <a class="code" href="../../da/d3e/definit_8h.html#acd864640121c7df2c19f61f7baa507e4">N2</a>=1, then the code forces there to be no boundary condition cells in the direction related to N2. This means one shouldn’t set any boundary conditions. The code basically assumes that all quantities in the 2nd direction are constant.</div>
<div class="line"></div>
<div class="line">Now, one should be careful. I’m pretty sure that all accesses to j+1 and j-1 and such things are avoided, but only if one uses the jm1, jp1, <a class="code" href="../../d1/de6/global_8depmnemonics_8h.html#a815ff9872dbd287ceb444b229ed48ded">jm1mac</a>(j), <a class="code" href="../../d1/de6/global_8depmnemonics_8h.html#a3e64aa2cd3c5e0933e74fa4e7a925570">jp1mac</a>(j) macros. If you manually added code with j+1 and j-1 or other offsets, then they should be fixed to be a macro like those so that no out-of-bound accesses occur.</div>
<div class="line"></div>
<div class="line">The only trick to worry about is that even within a single cell there are multiple locations. I think that one should set the physical size of the cell to be rather small in the 2nd direction so that all geometry terms that may exist at different locations are constant. Otherwise the cell would represent a large wedge that could have (e.g.) a gradient in gravity across the cell that might introduce fluxes of matter in one direction. Usually if you are evolving a setup (e.g.) at the equator, this isn’t a problem. But if the x2 positions are not symmetric in some way, then those non-symmetric positions come into the positions that come into the geometric terms. This is the correct behavior, but it may not be obvious otherwise why one should set the x2 physical size to be rather small.</div>
<div class="line"></div>
<div class="line">Best!</div>
<div class="line">Jon</div>
<div class="line"></div>
<div class="line">____________________________________</div>
<div class="line">From: Zhaohuan Zhu [mailto:zhuzh@umich.edu] </div>
<div class="line">Sent: Wednesday, May 27, 2009 6:24 PM</div>
<div class="line">To: Jonathan McKinney</div>
<div class="line">Subject: RE: 3-D code</div>
<div class="line"></div>
<div class="line">Hello Jonathan,</div>
<div class="line">I have one question about r-phi 2D. I am trying a <a class="code" href="../../d8/d5b/defs_8general_8h.html#abf002e87ba3ed4d3c9dcc98216e6d9d6">R</a>-phi 2-D disk simulation with your code. In my understanding, what I should do is just using the 3-D code and setting N2=1. Am I correct? What boundary condition should I use for Z direction (N2), or it doesn’t matter. Is there anything else I should be aware of if I try <a class="code" href="../../d8/d5b/defs_8general_8h.html#abf002e87ba3ed4d3c9dcc98216e6d9d6">R</a>-phi 2-D simulation? I really appreciate your help.</div>
<div class="line"></div>
<div class="line">Thanks,</div>
<div class="line">Zhaohuan</div>
<div class="line"></div>
<div class="line">Quoting Jonathan McKinney &lt;jmckinne@stanford.edu&gt;:</div>
<div class="line"></div>
<div class="line">&lt;blockquote&gt;</div>
<div class="line">Dear Zhaohuan,</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">I would think that self-gravity would be very easy. One would just use the</div>
<div class="line">standard FFTW-based algorithms and self-gravity forces would just enter as a</div>
<div class="line"><a class="code" href="../../d3/ddc/phys_8funcdeclare_8h.html#a4ebf7765a6bde079a76719b89d3033b6" title="add in source terms to equations of motion ui and dUriemann in UEVOLVE form assume q(pr) so consisten...">source</a> term in the end. Charles Gammie would know very well which algorithm</div>
<div class="line">to use and he may even be able to provide you code that could be inserted</div>
<div class="line">(although the code would be fairly straight-forward).</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">Best!</div>
<div class="line"></div>
<div class="line">Jon</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">_</div>
<div class="line"></div>
<div class="line">From: Zhaohuan Zhu [mailto:zhuzh@umich.edu]</div>
<div class="line">Sent: Wednesday, May 27, 2009 12:27 PM</div>
<div class="line">To: Jonathan Christopher McKinney</div>
<div class="line">Subject: 3-D code</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">Hello Jonathan,</div>
<div class="line"></div>
<div class="line">How are you recently? Hope everything went well for you. Recently I am</div>
<div class="line">thinking some projects I could do in future (could be a project for my</div>
<div class="line">postdoc proposal). One of the projects relates with the viscous-hydro code I</div>
<div class="line">got from you. We are thinking to do a longterm GI disk evolution. Could your</div>
<div class="line">code do a self-gravitating <a class="code" href="../../d8/d5b/defs_8general_8h.html#abf002e87ba3ed4d3c9dcc98216e6d9d6">R</a>-phi-2-D (non-axisymmetry, no-vertical</div>
<div class="line">structure)accretion disk? Or will it be very complicated to include</div>
<div class="line">self-gravity in your code?</div>
<div class="line"></div>
<div class="line">Thanks,</div>
<div class="line">Zhaohuan</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">&lt;/blockquote&gt;</div>
</div><!-- fragment --> 
<p>Definition in file <a class="el" href="../../dc/d25/pnmhd_22_8txt_source.html">2.txt</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 20 2016 15:52:36 for HARM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
